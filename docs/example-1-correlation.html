<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Example 1: Correlation | main.knit</title>
  <meta name="description" content="S2Y Lab 2<br />
Understanding correlation and further exploring relationships</div>" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Example 1: Correlation | main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Example 1: Correlation | main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="example-2-simulating-random-variables.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to S2Y Lab 2</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="example-1-correlation.html"><a href="example-1-correlation.html"><i class="fa fa-check"></i><b>2</b> Example 1: Correlation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="example-1-correlation.html"><a href="example-1-correlation.html#exploratory-analysis"><i class="fa fa-check"></i><b>2.1</b> Exploratory analysis</a></li>
<li class="chapter" data-level="2.2" data-path="example-1-correlation.html"><a href="example-1-correlation.html#population-correlation-hypothesis-test"><i class="fa fa-check"></i><b>2.2</b> Population correlation hypothesis test</a></li>
<li class="chapter" data-level="2.3" data-path="example-1-correlation.html"><a href="example-1-correlation.html#calculating-the-correlation-by-hand"><i class="fa fa-check"></i><b>2.3</b> Calculating the correlation by hand</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-2-simulating-random-variables.html"><a href="example-2-simulating-random-variables.html"><i class="fa fa-check"></i><b>3</b> Example 2: Simulating random variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="example-2-simulating-random-variables.html"><a href="example-2-simulating-random-variables.html#independent-random-variables"><i class="fa fa-check"></i><b>3.1</b> Independent random variables</a></li>
<li class="chapter" data-level="3.2" data-path="example-2-simulating-random-variables.html"><a href="example-2-simulating-random-variables.html#correlated-random-variables"><i class="fa fa-check"></i><b>3.2</b> Correlated random variables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-1-spurious-correlation.html"><a href="exercise-1-spurious-correlation.html"><i class="fa fa-check"></i><b>4</b> Exercise 1: Spurious correlation</a></li>
<li class="chapter" data-level="5" data-path="exercise-2-identifying-relationships.html"><a href="exercise-2-identifying-relationships.html"><i class="fa fa-check"></i><b>5</b> Exercise 2: Identifying relationships</a></li>
<li class="chapter" data-level="6" data-path="solution.html"><a href="solution.html"><i class="fa fa-check"></i><b>6</b> Solution</a>
<ul>
<li class="chapter" data-level="6.1" data-path="solution.html"><a href="solution.html#task-1"><i class="fa fa-check"></i><b>6.1</b> Task 1</a></li>
<li class="chapter" data-level="6.2" data-path="solution.html"><a href="solution.html#task-2"><i class="fa fa-check"></i><b>6.2</b> Task 2</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><div class="line-block">S2Y Lab 2<br />
Understanding correlation and further exploring relationships</div></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="example-1-correlation" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Example 1: Correlation<a href="example-1-correlation.html#example-1-correlation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In an experiment conducted by the GU physiology department, a sample of volunteers had their power output measured (in watts) while they ran up stairs as fast as possible under different test conditions. Their gender was noted and their weight and leg length measurements recorded. The data are available from the csv file <strong>phys1.csv</strong>. To open this data file in RStudio type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="example-1-correlation.html#cb1-1" aria-hidden="true" tabindex="-1"></a>phys <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;phys1.csv&quot;</span>)</span></code></pre></div>
<p>This will assign the data to the object <code>phys</code>. This worksheet contains six columns, described as follows:</p>
<div class="line-block">             <strong>C1: Gender</strong><br />
             <strong>C2: Weight (kgs)</strong><br />
             <strong>C3: Leg Length (metres)</strong><br />
             <strong>C4: Power1: Power output in the stair test</strong><br />
             <strong>C5: Power2: Power output in a test with a ramp on the stairs</strong><br />
             <strong>C6: Power3: Power output with ramp on the stairs and a fixed stride length</strong></div>
<p>You can view these names by typing <code>names(phys)</code>.</p>
<div id="exploratory-analysis" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Exploratory analysis<a href="example-1-correlation.html#exploratory-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>QUESTION</strong>: Produce a scatterplot to examine the relationship between <code>Power1</code> and <code>Weight</code>.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="example-1-correlation.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Power1 <span class="sc">~</span> Weight, <span class="at">data =</span> phys)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-5-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<p><br></p>
<div id="producing-labelled-scatterplots" class="section level4 unnumbered hasAnchor">
<h4>Producing labelled scatterplots<a href="example-1-correlation.html#producing-labelled-scatterplots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The simple scatterplot may have ignored the possibility that any relationship between these variables might be different for males and females. So, we now label the plot according to the gender of the subjects. The following provides one approach to doing this in RStudio.</p>
<p>The variable <code>Gender</code> within the data is a factor with two levels: Male and Female. Firstly, we will create a character variable for <code>Gender</code>, by using the command:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="example-1-correlation.html#cb3-1" aria-hidden="true" tabindex="-1"></a>Gender1 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(phys<span class="sc">$</span>Gender)</span></code></pre></div>
<p>We can now use this new object to label the points by gender. This can be done by typing the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="example-1-correlation.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Power1 <span class="sc">~</span> Weight, <span class="at">data =</span> phys, <span class="at">xlab =</span> <span class="st">&quot;Weight (kgs)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Power Output (Watts)&quot;</span>, </span>
<span id="cb4-2"><a href="example-1-correlation.html#cb4-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> Gender1)</span></code></pre></div>
<p>which produces the scatterplot given in Figure <a href="example-1-correlation.html#fig:phys-plot1">2.1</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:phys-plot1"></span>
<img src="main_files/figure-html/phys-plot1-1.png" alt="Scatterplot of `Power1` versus `Weight` with gender highlighted." width="70%" />
<p class="caption">
Figure 2.1: Scatterplot of <code>Power1</code> versus <code>Weight</code> with gender highlighted.
</p>
</div>
<p><br>
<strong>DISCUSSION</strong>: What can we say about the relationship between <code>Power1</code> and <code>Weight</code> for males and females separately?</p>
<p><br>
The plotting characters (as well as colour) highlighting males and females can also be chosen using numerical characters in <code>R</code>. For example,</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="example-1-correlation.html#cb5-1" aria-hidden="true" tabindex="-1"></a>Gender2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(phys<span class="sc">$</span>Gender)</span></code></pre></div>
</div>
</div>
<div id="population-correlation-hypothesis-test" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Population correlation hypothesis test<a href="example-1-correlation.html#population-correlation-hypothesis-test" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we would like to assess the strength of the relationship, if any, between <code>Power1</code> and <code>Weight</code>. We are going to do this for male and female volunteers separately, such that we assess the statistical significance of the observed correlation between these two variables in the wider populations of (i) males and (ii) females.</p>
<p>Firstly, we subset the data for males and females. One way to do this is:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="example-1-correlation.html#cb6-1" aria-hidden="true" tabindex="-1"></a>physM <span class="ot">&lt;-</span> <span class="fu">subset</span>(phys, Gender <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>, <span class="at">data =</span> phys)</span>
<span id="cb6-2"><a href="example-1-correlation.html#cb6-2" aria-hidden="true" tabindex="-1"></a>physF <span class="ot">&lt;-</span> <span class="fu">subset</span>(phys, Gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>, <span class="at">data =</span> phys)</span></code></pre></div>
<p>We now perform, separately for males and females, the following hypothesis test:</p>
<center>
<span class="math inline">\(H_0: \rho=0\)</span> vs. <span class="math inline">\(H_1:\rho \ne 0\)</span>
</center>
<p>We test the null hypothesis, <span class="math inline">\(H_0\)</span>, that is, that in the population of males/females the correlation between <em>Power Output</em> and <em>Weight</em> is 0 against the alternative hypothesis, <span class="math inline">\(H_1\)</span>, that the correlation is not equal to 0.</p>
<p>To compute the sample correlation coefficient, <span class="math inline">\(r\)</span>, and perform our hypothesis test, we use the <code>cor.test</code> command. For the males data, the command is as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="example-1-correlation.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(physM<span class="sc">$</span>Power1, physM<span class="sc">$</span>Weight)</span></code></pre></div>
<p>Note: in the <code>cor.test</code> command the $ notation is required to access the variables from the subsetted data.</p>
<p>The hypothesis test produces a <span class="math inline">\(p\)</span>-value, where we reject the null hypothesis, <span class="math inline">\(H_0\)</span>, for small values of the <span class="math inline">\(p\)</span>-value (typically <span class="math inline">\(p\)</span>-values <span class="math inline">\(&lt; 0.05\)</span>). It also produces a 95% confidence interval for a range of plausible values for the true population correlation.</p>
<p><strong>QUESTION</strong>:</p>
<ol style="list-style-type: lower-alpha">
<li><p>What is the sample correlation coefficient for the males data? <input class='webex-solveme nospaces' size='9' data-answer='["0.8136441","0.813644","0.81364","0.8136","0.814","0.81","0.8"]'/></p></li>
<li><p>What is the <span class="math inline">\(p\)</span>-value for the test? <input class='webex-solveme nospaces' size='8' data-answer='["0.000224","0.00022","0.0002"]'/></p></li>
<li><p>The sample correlation coefficient tells us that <em>Power Output</em> and <em>Weight</em> for males have a <select class='webex-select'><option value='blank'></option><option value=''>weak</option><option value='answer'>strong</option></select>, <select class='webex-select'><option value='blank'></option><option value='answer'>positive</option><option value=''>negative</option></select>, <select class='webex-select'><option value='blank'></option><option value='answer'>linear</option><option value=''>non-linear</option></select> relationship.</p></li>
<li><p>Based on the <span class="math inline">\(p\)</span>-value of the test, we would <select class='webex-select'><option value='blank'></option><option value='answer'>reject the null hypothesis</option><option value=''>reject the alternative hypothesis</option><option value=''>fail to reject the null hypothesis</option><option value=''>fail to reject the alternative hypothesis</option></select> and conclude that <span class="math inline">\(\rho\)</span> <select class='webex-select'><option value='blank'></option><option value='answer'>is significantly different from zero</option><option value=''>is not significantly different from zero</option></select>.</p></li>
</ol>
<p><br>
Now repeat the hypothesis test for the females data.</p>
<p><strong>QUESTION</strong>:</p>
<ol style="list-style-type: lower-alpha">
<li><p>What is the sample correlation coefficient for the females data? <input class='webex-solveme nospaces' size='9' data-answer='["0.3664454","0.366445","0.36645","0.3664","0.366","0.37","0.4"]'/></p></li>
<li><p>What is the <span class="math inline">\(p\)</span>-value for the test? <input class='webex-solveme nospaces' size='6' data-answer='["0.1791","0.179","0.18","0.2"]'/></p></li>
<li><p>The sample correlation coefficient tells us that <em>Power Output</em> and <em>Weight</em> for females have a <select class='webex-select'><option value='blank'></option><option value='answer'>weak</option><option value=''>strong</option></select>, <select class='webex-select'><option value='blank'></option><option value='answer'>positive</option><option value=''>negative</option></select>, <select class='webex-select'><option value='blank'></option><option value='answer'>linear</option><option value=''>non-linear</option></select> relationship.</p></li>
<li><p>Based on the <span class="math inline">\(p\)</span>-value of the test, we would <select class='webex-select'><option value='blank'></option><option value=''>reject the null hypothesis</option><option value=''>reject the alternative hypothesis</option><option value='answer'>fail to reject the null hypothesis</option><option value=''>fail to reject the alternative hypothesis</option></select> and conclude that <span class="math inline">\(\rho\)</span> <select class='webex-select'><option value='blank'></option><option value=''>is significantly different from zero</option><option value='answer'>is not significantly different from zero</option></select>.</p></li>
</ol>
<p><br>
Note: if we do not subset the data by gender, we obtain a sample correlation coefficient <span class="math inline">\(r = 0.89\)</span>, with a <span class="math inline">\(p\)</span>-value <span class="math inline">\(\leq 0.05\)</span>, and thus we would conclude that there is a strong, positive linear relationship between <em>Power Output</em> and <em>Weight</em>. However, we now know that is not the case for females.</p>
</div>
<div id="calculating-the-correlation-by-hand" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Calculating the correlation by hand<a href="example-1-correlation.html#calculating-the-correlation-by-hand" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To compute the sample correlation coefficient, <span class="math inline">\(r\)</span>, the command <code>cor.test</code> uses the formula given in <a href="index.html#eq:eq2">(1.2)</a>. To check that the <code>cor.test</code> command is ‘correct’, we can ourselves calculate the correlation directly
using the following commands:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="example-1-correlation.html#cb8-1" aria-hidden="true" tabindex="-1"></a>var  <span class="co"># computes the variance of a given vector</span></span>
<span id="cb8-2"><a href="example-1-correlation.html#cb8-2" aria-hidden="true" tabindex="-1"></a>cov  <span class="co"># computes the covariance between the vectors x and y</span></span>
<span id="cb8-3"><a href="example-1-correlation.html#cb8-3" aria-hidden="true" tabindex="-1"></a>sum  <span class="co"># returns the sum of the values given</span></span>
<span id="cb8-4"><a href="example-1-correlation.html#cb8-4" aria-hidden="true" tabindex="-1"></a>mean <span class="co"># computes the mean of a given vector</span></span>
<span id="cb8-5"><a href="example-1-correlation.html#cb8-5" aria-hidden="true" tabindex="-1"></a>sqrt <span class="co"># computes the square-root of a given vector</span></span></code></pre></div>
<p><strong>TASK 1</strong>: Give your answers to 3 decimal places where required.</p>
<ol style="list-style-type: lower-alpha">
<li>Using the commands <code>var</code> and <code>cov</code>, compute the variance and covariance given in <a href="index.html#eq:eq1">(1.1)</a> for the males data, where <span class="math inline">\(Y\)</span> denotes the response variable <em>Power Output</em>, and <span class="math inline">\(X\)</span> denotes the explanatory variable <em>Weight</em>.</li>
</ol>
<div class="line-block">       The variance of the explanatory variable <em>Weight</em> is <input class='webex-solveme nospaces' size='6' data-answer='["47.374"]'/>.<br />
       The variance of the response variable <em>Power Output</em> is <input class='webex-solveme nospaces' size='8' data-answer='["25435.39"]'/>.<br />
       The covariance of the response and explanatory variables is <input class='webex-solveme nospaces' size='7' data-answer='["893.147"]'/>.</div>
<p><br></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Using the variance and covariance obtained in (a), and the square-root command, <code>sqrt</code>, compute the sample correlation coefficient using the formula given in <a href="index.html#eq:eq1">(1.1)</a> for the males data. Does this match what was obtained using the <code>cor.test</code> command?</li>
</ol>
<div class="line-block">       The sample correlation coefficient using the variance and covariance obtained in (a) is <input class='webex-solveme nospaces' size='5' data-answer='["0.814",".814"]'/>.<br />
       This <select class='webex-select'><option value='blank'></option><option value='answer'>matches</option><option value=''>does not match</option></select> the sample correlation coefficient found using <code>cor.test</code>.</div>
<p><br></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Use the <code>mean</code>, <code>sum</code>, and <code>sqrt</code> commands to compute the sum of squares, <span class="math inline">\(S_{xx}\)</span> and <span class="math inline">\(S_{yy}\)</span>, and the sum of products, <span class="math inline">\(S_{xy}\)</span>, given in formula <a href="index.html#eq:eq2">(1.2)</a> for the males data.</li>
</ol>
<div class="line-block">       <span class="math inline">\(S_{xx}\)</span>: <input class='webex-solveme nospaces' size='7' data-answer='["663.233"]'/><br />
       <span class="math inline">\(S_{yy}\)</span>: <input class='webex-solveme nospaces' size='10' data-answer='["356095.5","356095.500"]'/><br />
       <span class="math inline">\(S_{xy}\)</span>: <input class='webex-solveme nospaces' size='9' data-answer='["12504.06","12504.060"]'/></div>
<p><br></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Use the sum of squares and sum of products obtained in (c) to compute the sample correlation coefficient, <span class="math inline">\(r\)</span>, using formula <a href="index.html#eq:eq2">(1.2)</a> for the males data. Does this match your answer from (b) and the <code>cor.test</code> command?</li>
</ol>
<div class="line-block">       The sample correlation coefficient found using the sum of squares and sum of products obtained in (c) is <input class='webex-solveme nospaces' size='5' data-answer='["0.814",".814"]'/>. This <select class='webex-select'><option value='blank'></option><option value='answer'>matches</option><option value=''>does not match</option></select> the answer from (b) and the sample correlation coefficient found using <code>cor.test</code>.</div>
<p><br></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Repeat (a)–(d) for the females data and compare the answers obtained from formulae <a href="index.html#eq:eq1">(1.1)</a> and <a href="index.html#eq:eq2">(1.2)</a> with that found using the <code>cor.test</code> command.</li>
</ol>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="example-2-simulating-random-variables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
